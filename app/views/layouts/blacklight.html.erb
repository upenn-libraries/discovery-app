<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <!-- Mobile viewport optimization h5bp.com/ad -->
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <!-- Internet Explorer use the highest version available -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Mobile IE allows us to activate ClearType technology for smoothing fonts for easy reading -->
    <!--[if IEMobile]>
      <meta http-equiv="cleartype" content="on">
    <![endif]-->

    <title><%= render_page_title %></title>
    <%= opensearch_description_tag application_name, opensearch_catalog_url(:format => 'xml') %>
    <%= favicon_link_tag %>
    <%= stylesheet_link_tag "application", media: "all" %>

    <!-- Google Tag Manager. -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-P9SGBHT');</script>

    <!-- End Google Tag Manager -->

    <!-- Matomo -->
    <script type="text/javascript">
      var _paq = window._paq || [];
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="//matomo.library.upenn.edu/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '2']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <!-- End Matomo Code -->

    <%= javascript_include_tag "application" %>
    <script type="text/javascript" src="https://libapps.s3.amazonaws.com/sites/231/include/franklinalert.js"></script>
    <%= csrf_meta_tags %>
    <%= content_for(:head) %>
  </head>
  <body class="<%= render_body_class %>">

  <!-- Google Tag Manager (noscript). Paste immediately after the opening body tag -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P9SGBHT"
  height="0" width="0" style="display:none;visibility:hidden"></iframe>
  <!-- Matomo Image Tracker-->
  <img src="http://matomo.library.upenn.edu/matomo.php?idsite=2&amp;rec=1" style="border:0" alt="" />
  <!-- End Matomo -->
  </noscript>
  <!-- End Google Tag Manager (noscript) -->

  <%= render :partial => 'shared/header_navbar' %>

  <%= render partial: 'shared/ajax_modal' %>

  <div id="main-container" class="container-fluid">
    <%= content_tag :h1, application_name, class: 'sr-only application-heading' %>

    <%= render :partial=>'/flash_msg', layout: 'shared/flash_messages' %>

    <div class="row no-gutters">
      <%= yield %>
    </div>
  </div>

  <div id="requesting-logged-in" data-value="<%= current_user ? 'true' : 'false' %>"></div>
  <div class="modal fade" id="confirm-modal"></div>

  <%= render :partial => 'shared/footer' %>
  </body>
</html>
